function cov_drbgbhc1p(){var path="C:\\Users\\Filip\\OneDrive\\Documents\\GitHub\\test3\\routes\\index.js";var hash="4b97f5fdfb1e17cddebf5a7cf64203accc66f002";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Filip\\OneDrive\\Documents\\GitHub\\test3\\routes\\index.js",statementMap:{"0":{start:{line:1,column:14},end:{line:1,column:32}},"1":{start:{line:2,column:13},end:{line:2,column:29}},"2":{start:{line:3,column:14},end:{line:3,column:32}},"3":{start:{line:4,column:12},end:{line:4,column:28}},"4":{start:{line:7,column:13},end:{line:7,column:36}},"5":{start:{line:8,column:13},end:{line:8,column:51}},"6":{start:{line:9,column:12},end:{line:9,column:16}},"7":{start:{line:10,column:12},end:{line:10,column:16}},"8":{start:{line:11,column:11},end:{line:11,column:15}},"9":{start:{line:12,column:13},end:{line:12,column:17}},"10":{start:{line:14,column:0},end:{line:14,column:11}},"11":{start:{line:17,column:0},end:{line:21,column:3}},"12":{start:{line:18,column:16},end:{line:18,column:22}},"13":{start:{line:20,column:4},end:{line:20,column:41}},"14":{start:{line:24,column:0},end:{line:26,column:3}},"15":{start:{line:25,column:4},end:{line:25,column:49}},"16":{start:{line:29,column:0},end:{line:54,column:3}},"17":{start:{line:31,column:4},end:{line:53,column:11}},"18":{start:{line:43,column:12},end:{line:43,column:39}},"19":{start:{line:44,column:12},end:{line:44,column:30}},"20":{start:{line:48,column:12},end:{line:52,column:13}},"21":{start:{line:49,column:16},end:{line:49,column:82}},"22":{start:{line:51,column:16},end:{line:51,column:62}},"23":{start:{line:57,column:0},end:{line:86,column:3}},"24":{start:{line:58,column:4},end:{line:58,column:35}},"25":{start:{line:60,column:4},end:{line:85,column:11}},"26":{start:{line:70,column:12},end:{line:70,column:45}},"27":{start:{line:71,column:12},end:{line:71,column:44}},"28":{start:{line:72,column:12},end:{line:72,column:43}},"29":{start:{line:73,column:12},end:{line:76,column:15}},"30":{start:{line:74,column:16},end:{line:74,column:32}},"31":{start:{line:75,column:16},end:{line:75,column:37}},"32":{start:{line:80,column:12},end:{line:84,column:13}},"33":{start:{line:81,column:16},end:{line:81,column:77}},"34":{start:{line:83,column:16},end:{line:83,column:59}},"35":{start:{line:90,column:0},end:{line:113,column:3}},"36":{start:{line:91,column:4},end:{line:91,column:32}},"37":{start:{line:92,column:4},end:{line:112,column:5}},"38":{start:{line:93,column:8},end:{line:109,column:15}},"39":{start:{line:95,column:16},end:{line:108,column:17}},"40":{start:{line:96,column:31},end:{line:96,column:47}},"41":{start:{line:98,column:20},end:{line:104,column:23}},"42":{start:{line:106,column:20},end:{line:106,column:53}},"43":{start:{line:107,column:20},end:{line:107,column:40}},"44":{start:{line:111,column:8},end:{line:111,column:26}},"45":{start:{line:117,column:0},end:{line:150,column:3}},"46":{start:{line:118,column:4},end:{line:149,column:5}},"47":{start:{line:120,column:8},end:{line:148,column:15}},"48":{start:{line:128,column:16},end:{line:128,column:28}},"49":{start:{line:130,column:16},end:{line:140,column:19}},"50":{start:{line:131,column:20},end:{line:139,column:23}},"51":{start:{line:143,column:16},end:{line:147,column:17}},"52":{start:{line:144,column:20},end:{line:144,column:81}},"53":{start:{line:146,column:20},end:{line:146,column:63}},"54":{start:{line:153,column:0},end:{line:177,column:3}},"55":{start:{line:154,column:4},end:{line:176,column:5}},"56":{start:{line:156,column:8},end:{line:173,column:15}},"57":{start:{line:164,column:16},end:{line:164,column:48}},"58":{start:{line:165,column:16},end:{line:165,column:34}},"59":{start:{line:168,column:16},end:{line:172,column:17}},"60":{start:{line:169,column:20},end:{line:169,column:81}},"61":{start:{line:171,column:20},end:{line:171,column:63}},"62":{start:{line:175,column:8},end:{line:175,column:26}},"63":{start:{line:181,column:17},end:{line:196,column:10}},"64":{start:{line:190,column:12},end:{line:190,column:33}},"65":{start:{line:194,column:12},end:{line:194,column:31}},"66":{start:{line:195,column:12},end:{line:195,column:44}},"67":{start:{line:198,column:4},end:{line:198,column:18}},"68":{start:{line:203,column:17},end:{line:218,column:10}},"69":{start:{line:212,column:12},end:{line:212,column:45}},"70":{start:{line:216,column:12},end:{line:216,column:31}},"71":{start:{line:217,column:12},end:{line:217,column:44}},"72":{start:{line:220,column:4},end:{line:220,column:18}},"73":{start:{line:225,column:4},end:{line:233,column:7}},"74":{start:{line:226,column:8},end:{line:232,column:9}},"75":{start:{line:227,column:12},end:{line:227,column:45}},"76":{start:{line:228,column:12},end:{line:228,column:40}},"77":{start:{line:230,column:12},end:{line:230,column:43}},"78":{start:{line:231,column:12},end:{line:231,column:39}},"79":{start:{line:238,column:4},end:{line:250,column:11}},"80":{start:{line:246,column:12},end:{line:246,column:39}},"81":{start:{line:249,column:12},end:{line:249,column:40}},"82":{start:{line:253,column:0},end:{line:253,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:17,column:16},end:{line:17,column:17}},loc:{start:{line:17,column:35},end:{line:21,column:1}},line:17},"1":{name:"(anonymous_1)",decl:{start:{line:24,column:24},end:{line:24,column:25}},loc:{start:{line:24,column:43},end:{line:26,column:1}},line:24},"2":{name:"(anonymous_2)",decl:{start:{line:29,column:25},end:{line:29,column:26}},loc:{start:{line:29,column:44},end:{line:54,column:1}},line:29},"3":{name:"(anonymous_3)",decl:{start:{line:42,column:14},end:{line:42,column:15}},loc:{start:{line:42,column:26},end:{line:45,column:9}},line:42},"4":{name:"(anonymous_4)",decl:{start:{line:46,column:15},end:{line:46,column:16}},loc:{start:{line:46,column:24},end:{line:53,column:9}},line:46},"5":{name:"(anonymous_5)",decl:{start:{line:57,column:17},end:{line:57,column:18}},loc:{start:{line:57,column:36},end:{line:86,column:1}},line:57},"6":{name:"(anonymous_6)",decl:{start:{line:68,column:14},end:{line:68,column:15}},loc:{start:{line:68,column:26},end:{line:77,column:9}},line:68},"7":{name:"(anonymous_7)",decl:{start:{line:73,column:48},end:{line:73,column:49}},loc:{start:{line:73,column:60},end:{line:76,column:13}},line:73},"8":{name:"(anonymous_8)",decl:{start:{line:78,column:15},end:{line:78,column:16}},loc:{start:{line:78,column:24},end:{line:85,column:9}},line:78},"9":{name:"(anonymous_9)",decl:{start:{line:90,column:19},end:{line:90,column:20}},loc:{start:{line:90,column:38},end:{line:113,column:1}},line:90},"10":{name:"(anonymous_10)",decl:{start:{line:94,column:12},end:{line:94,column:13}},loc:{start:{line:94,column:45},end:{line:109,column:13}},line:94},"11":{name:"(anonymous_11)",decl:{start:{line:117,column:20},end:{line:117,column:21}},loc:{start:{line:117,column:39},end:{line:150,column:1}},line:117},"12":{name:"(anonymous_12)",decl:{start:{line:127,column:18},end:{line:127,column:19}},loc:{start:{line:127,column:24},end:{line:141,column:13}},line:127},"13":{name:"(anonymous_13)",decl:{start:{line:130,column:36},end:{line:130,column:37}},loc:{start:{line:130,column:48},end:{line:140,column:17}},line:130},"14":{name:"(anonymous_14)",decl:{start:{line:142,column:19},end:{line:142,column:20}},loc:{start:{line:142,column:28},end:{line:148,column:13}},line:142},"15":{name:"(anonymous_15)",decl:{start:{line:153,column:23},end:{line:153,column:24}},loc:{start:{line:153,column:42},end:{line:177,column:1}},line:153},"16":{name:"(anonymous_16)",decl:{start:{line:163,column:18},end:{line:163,column:19}},loc:{start:{line:163,column:30},end:{line:166,column:13}},line:163},"17":{name:"(anonymous_17)",decl:{start:{line:167,column:19},end:{line:167,column:20}},loc:{start:{line:167,column:28},end:{line:173,column:13}},line:167},"18":{name:"stations",decl:{start:{line:180,column:15},end:{line:180,column:23}},loc:{start:{line:180,column:32},end:{line:199,column:1}},line:180},"19":{name:"(anonymous_19)",decl:{start:{line:188,column:14},end:{line:188,column:15}},loc:{start:{line:188,column:26},end:{line:192,column:9}},line:188},"20":{name:"(anonymous_20)",decl:{start:{line:193,column:15},end:{line:193,column:16}},loc:{start:{line:193,column:24},end:{line:196,column:9}},line:193},"21":{name:"getUser",decl:{start:{line:202,column:15},end:{line:202,column:22}},loc:{start:{line:202,column:31},end:{line:221,column:1}},line:202},"22":{name:"(anonymous_22)",decl:{start:{line:210,column:14},end:{line:210,column:15}},loc:{start:{line:210,column:26},end:{line:214,column:9}},line:210},"23":{name:"(anonymous_23)",decl:{start:{line:215,column:15},end:{line:215,column:16}},loc:{start:{line:215,column:24},end:{line:218,column:9}},line:215},"24":{name:"serverUp",decl:{start:{line:224,column:9},end:{line:224,column:17}},loc:{start:{line:224,column:20},end:{line:234,column:1}},line:224},"25":{name:"(anonymous_25)",decl:{start:{line:225,column:50},end:{line:225,column:51}},loc:{start:{line:225,column:77},end:{line:233,column:5}},line:225},"26":{name:"rentQueue",decl:{start:{line:237,column:9},end:{line:237,column:18}},loc:{start:{line:237,column:21},end:{line:251,column:1}},line:237},"27":{name:"(anonymous_27)",decl:{start:{line:245,column:14},end:{line:245,column:15}},loc:{start:{line:245,column:26},end:{line:247,column:9}},line:245},"28":{name:"(anonymous_28)",decl:{start:{line:248,column:15},end:{line:248,column:16}},loc:{start:{line:248,column:24},end:{line:250,column:9}},line:248}},branchMap:{"0":{loc:{start:{line:48,column:12},end:{line:52,column:13}},type:"if",locations:[{start:{line:48,column:12},end:{line:52,column:13}},{start:{line:48,column:12},end:{line:52,column:13}}],line:48},"1":{loc:{start:{line:80,column:12},end:{line:84,column:13}},type:"if",locations:[{start:{line:80,column:12},end:{line:84,column:13}},{start:{line:80,column:12},end:{line:84,column:13}}],line:80},"2":{loc:{start:{line:92,column:4},end:{line:112,column:5}},type:"if",locations:[{start:{line:92,column:4},end:{line:112,column:5}},{start:{line:92,column:4},end:{line:112,column:5}}],line:92},"3":{loc:{start:{line:95,column:16},end:{line:108,column:17}},type:"if",locations:[{start:{line:95,column:16},end:{line:108,column:17}},{start:{line:95,column:16},end:{line:108,column:17}}],line:95},"4":{loc:{start:{line:95,column:20},end:{line:95,column:56}},type:"binary-expr",locations:[{start:{line:95,column:20},end:{line:95,column:26}},{start:{line:95,column:30},end:{line:95,column:56}}],line:95},"5":{loc:{start:{line:118,column:4},end:{line:149,column:5}},type:"if",locations:[{start:{line:118,column:4},end:{line:149,column:5}},{start:{line:118,column:4},end:{line:149,column:5}}],line:118},"6":{loc:{start:{line:143,column:16},end:{line:147,column:17}},type:"if",locations:[{start:{line:143,column:16},end:{line:147,column:17}},{start:{line:143,column:16},end:{line:147,column:17}}],line:143},"7":{loc:{start:{line:154,column:4},end:{line:176,column:5}},type:"if",locations:[{start:{line:154,column:4},end:{line:176,column:5}},{start:{line:154,column:4},end:{line:176,column:5}}],line:154},"8":{loc:{start:{line:168,column:16},end:{line:172,column:17}},type:"if",locations:[{start:{line:168,column:16},end:{line:172,column:17}},{start:{line:168,column:16},end:{line:172,column:17}}],line:168},"9":{loc:{start:{line:226,column:8},end:{line:232,column:9}},type:"if",locations:[{start:{line:226,column:8},end:{line:232,column:9}},{start:{line:226,column:8},end:{line:232,column:9}}],line:226},"10":{loc:{start:{line:226,column:12},end:{line:226,column:48}},type:"binary-expr",locations:[{start:{line:226,column:12},end:{line:226,column:18}},{start:{line:226,column:22},end:{line:226,column:48}}],line:226}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4b97f5fdfb1e17cddebf5a7cf64203accc66f002"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_drbgbhc1p=function(){return actualCoverage;};}return actualCoverage;}cov_drbgbhc1p();var express=(cov_drbgbhc1p().s[0]++,require('express'));var router=(cov_drbgbhc1p().s[1]++,express.Router());var request=(cov_drbgbhc1p().s[2]++,require('request'));var axios=(cov_drbgbhc1p().s[3]++,require('axios'));//const mapModel = require('../public/javascripts/map.js');
var apiAdr=(cov_drbgbhc1p().s[4]++,"http://localhost:1337");var apiKey=(cov_drbgbhc1p().s[5]++,"90301a26-894c-49eb-826d-ae0c2b22a405");var token=(cov_drbgbhc1p().s[6]++,null);var email=(cov_drbgbhc1p().s[7]++,null);var city=(cov_drbgbhc1p().s[8]++,null);var userId=(cov_drbgbhc1p().s[9]++,null);cov_drbgbhc1p().s[10]++;serverUp();// GET LOGIN PAGE
cov_drbgbhc1p().s[11]++;router.get('/',function(req,res){cov_drbgbhc1p().f[0]++;var title=(cov_drbgbhc1p().s[12]++,"Home");cov_drbgbhc1p().s[13]++;res.render('index',{title:title});});// GET REGISTER PAGE
cov_drbgbhc1p().s[14]++;router.get('/register',function(req,res){cov_drbgbhc1p().f[1]++;cov_drbgbhc1p().s[15]++;res.render('register',{title:'Register'});});//REGISTER CALL
cov_drbgbhc1p().s[16]++;router.post('/register',function(req,res){cov_drbgbhc1p().f[2]++;cov_drbgbhc1p().s[17]++;//console.log(req.body.cityid);
axios({method:'post',url:`${apiAdr}/v1/auth/customer?apiKey=${apiKey}`,data:{email:req.body.username,password:req.body.password,firstname:req.body.firstname,lastname:req.body.lastname,cityid:req.body.cityid}}).then(response=>{cov_drbgbhc1p().f[3]++;cov_drbgbhc1p().s[18]++;console.log(response.data);cov_drbgbhc1p().s[19]++;res.redirect('/');}).catch(error=>{cov_drbgbhc1p().f[4]++;cov_drbgbhc1p().s[20]++;//console.log(error.response);
if(error.response!==undefined){cov_drbgbhc1p().b[0][0]++;cov_drbgbhc1p().s[21]++;res.render('register',{msg:error.response.data.errors.message});}else{cov_drbgbhc1p().b[0][1]++;cov_drbgbhc1p().s[22]++;res.render('register',{msg:"Server down!"});}});});//LOGIN CALL
cov_drbgbhc1p().s[23]++;router.post('/',function(req,res){cov_drbgbhc1p().f[5]++;cov_drbgbhc1p().s[24]++;console.log(req.body.username);//var temp = JSON.stringify({email: req.body.email});
cov_drbgbhc1p().s[25]++;axios({method:'post',url:`${apiAdr}/v1/auth/customer/login?apiKey=${apiKey}`,data:{email:req.body.username,password:req.body.password}}).then(response=>{cov_drbgbhc1p().f[6]++;cov_drbgbhc1p().s[26]++;//console.log(response.data.data.id);
token=response.data.data.token;cov_drbgbhc1p().s[27]++;email=response.data.data.user;cov_drbgbhc1p().s[28]++;userId=response.data.data.id;cov_drbgbhc1p().s[29]++;getUser(response.data.data.id).then(response=>{cov_drbgbhc1p().f[7]++;cov_drbgbhc1p().s[30]++;city=response;cov_drbgbhc1p().s[31]++;res.redirect('/map');});}).catch(error=>{cov_drbgbhc1p().f[8]++;cov_drbgbhc1p().s[32]++;//console.log(error);
if(error.response!==undefined){cov_drbgbhc1p().b[1][0]++;cov_drbgbhc1p().s[33]++;res.render('index',{msg:error.response.data.errors.title});}else{cov_drbgbhc1p().b[1][1]++;cov_drbgbhc1p().s[34]++;res.render('index',{msg:"Server down!"});}});});//BIKE RENTAL MAP
cov_drbgbhc1p().s[35]++;router.get('/map',function(req,res){cov_drbgbhc1p().f[9]++;cov_drbgbhc1p().s[36]++;console.log("mapcall"+city);cov_drbgbhc1p().s[37]++;if(token!=null){cov_drbgbhc1p().b[2][0]++;cov_drbgbhc1p().s[38]++;request(`${apiAdr}/v1/city/${city}/bike?apiKey=${apiKey}`,function(error,response,body){cov_drbgbhc1p().f[10]++;cov_drbgbhc1p().s[39]++;if((cov_drbgbhc1p().b[4][0]++,!error)&&(cov_drbgbhc1p().b[4][1]++,response.statusCode==200)){cov_drbgbhc1p().b[3][0]++;var data=(cov_drbgbhc1p().s[40]++,JSON.parse(body));cov_drbgbhc1p().s[41]++;res.render('map',{title:'test',bikeId:'Click Bike',bikeCoords:'',bikeBattery:'',dataPack:data});}else{cov_drbgbhc1p().b[3][1]++;cov_drbgbhc1p().s[42]++;console.log('Api not available');cov_drbgbhc1p().s[43]++;res.render('index');}});}else{cov_drbgbhc1p().b[2][1]++;cov_drbgbhc1p().s[44]++;res.redirect('/');}});//RENTAL CALL START
cov_drbgbhc1p().s[45]++;router.post('/map',function(req,res){cov_drbgbhc1p().f[11]++;cov_drbgbhc1p().s[46]++;if(token!=null){cov_drbgbhc1p().b[5][0]++;cov_drbgbhc1p().s[47]++;//console.log(req.body.bikeId);
axios({method:'post',headers:{"x-access-token":token},url:`${apiAdr}/v1/travel/bike/${req.body.bikeId}?apiKey=${apiKey}`}).then(()=>{cov_drbgbhc1p().f[12]++;cov_drbgbhc1p().s[48]++;rentQueue();//console.log(response);
cov_drbgbhc1p().s[49]++;stations(city).then(response=>{cov_drbgbhc1p().f[13]++;cov_drbgbhc1p().s[50]++;res.render('rental',{title:req.body.bikeId,bId:req.body.bikeId,cId:userId,tkn:token,bCrd:req.body.bikeCoords,usr:email,dataPack:response});});}).catch(error=>{cov_drbgbhc1p().f[14]++;cov_drbgbhc1p().s[51]++;if(error.response!==undefined){cov_drbgbhc1p().b[6][0]++;cov_drbgbhc1p().s[52]++;res.render('index',{msg:error.response.data.errors.title});}else{cov_drbgbhc1p().b[6][1]++;cov_drbgbhc1p().s[53]++;res.render('index',{msg:"Server down!"});}});}else{cov_drbgbhc1p().b[5][1]++;}});//RENTAL CALL END
cov_drbgbhc1p().s[54]++;router.post('/rental',function(req,res){cov_drbgbhc1p().f[15]++;cov_drbgbhc1p().s[55]++;if(token!=null){cov_drbgbhc1p().b[7][0]++;cov_drbgbhc1p().s[56]++;//console.log(req.body);
axios({method:'delete',headers:{"x-access-token":token},url:`${apiAdr}/v1/travel/bike/${req.body.bikeId}?apiKey=${apiKey}`}).then(response=>{cov_drbgbhc1p().f[16]++;cov_drbgbhc1p().s[57]++;console.log(response.data.data);cov_drbgbhc1p().s[58]++;res.redirect('/');}).catch(error=>{cov_drbgbhc1p().f[17]++;cov_drbgbhc1p().s[59]++;if(error.response!==undefined){cov_drbgbhc1p().b[8][0]++;cov_drbgbhc1p().s[60]++;res.render('index',{msg:error.response.data.errors.title});}else{cov_drbgbhc1p().b[8][1]++;cov_drbgbhc1p().s[61]++;res.render('index',{msg:"Server down!"});}});}else{cov_drbgbhc1p().b[7][1]++;cov_drbgbhc1p().s[62]++;res.redirect('/');}});// USE CITYID FROM USER TO GET STATIONS FOR ACTIVE RENTAL
async function stations(cityId){cov_drbgbhc1p().f[18]++;var result=(cov_drbgbhc1p().s[63]++,await axios({method:'get',headers:{"x-access-token":token},url:`${apiAdr}/v1/city/${cityId}/station?apiKey=${apiKey}`}).then(response=>{cov_drbgbhc1p().f[19]++;cov_drbgbhc1p().s[64]++;//console.log(response.data);
return response.data;//return response.data.data.cityid;
}).catch(error=>{cov_drbgbhc1p().f[20]++;cov_drbgbhc1p().s[65]++;console.log(error);cov_drbgbhc1p().s[66]++;return"Error requesting user.";}));cov_drbgbhc1p().s[67]++;return result;}// GET CITY ID FROM USER AFTER LOGIN
async function getUser(userId){cov_drbgbhc1p().f[21]++;var result=(cov_drbgbhc1p().s[68]++,await axios({method:'get',headers:{"x-access-token":token},url:`${apiAdr}/v1/auth/customer/${userId}?apiKey=${apiKey}`}).then(response=>{cov_drbgbhc1p().f[22]++;cov_drbgbhc1p().s[69]++;//console.log(response.data.data.cityid);
return response.data.data.cityid;//return response.data.data.cityid;
}).catch(error=>{cov_drbgbhc1p().f[23]++;cov_drbgbhc1p().s[70]++;console.log(error);cov_drbgbhc1p().s[71]++;return"Error requesting user.";}));cov_drbgbhc1p().s[72]++;return result;}// CHECK IF SERVER IS UP AND AVAILABLE OTHERWISE USE DOCKERSERVER
function serverUp(){cov_drbgbhc1p().f[24]++;cov_drbgbhc1p().s[73]++;request(`${apiAdr}/v1/city?apiKey=${apiKey}`,function(error,response){cov_drbgbhc1p().f[25]++;cov_drbgbhc1p().s[74]++;if((cov_drbgbhc1p().b[10][0]++,!error)&&(cov_drbgbhc1p().b[10][1]++,response.statusCode==200)){cov_drbgbhc1p().b[9][0]++;cov_drbgbhc1p().s[75]++;apiAdr="http://localhost:1337";cov_drbgbhc1p().s[76]++;console.log("Server is up");}else{cov_drbgbhc1p().b[9][1]++;cov_drbgbhc1p().s[77]++;apiAdr="http://backend:1337";cov_drbgbhc1p().s[78]++;console.log("Server down");}});}//UPDATE RENT QUEUE IN ORDER TO RETURN BIKE
function rentQueue(){cov_drbgbhc1p().f[26]++;cov_drbgbhc1p().s[79]++;axios({method:'get',headers:{"x-access-token":token},url:`${apiAdr}/v1/travel/rented?apiKey=${apiKey}`}).then(response=>{cov_drbgbhc1p().f[27]++;cov_drbgbhc1p().s[80]++;console.log(response.data);}).catch(error=>{cov_drbgbhc1p().f[28]++;cov_drbgbhc1p().s[81]++;console.log(error.response);});}cov_drbgbhc1p().s[82]++;module.exports=router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwicm91dGVyIiwiUm91dGVyIiwicmVxdWVzdCIsImF4aW9zIiwiYXBpQWRyIiwiYXBpS2V5IiwidG9rZW4iLCJlbWFpbCIsImNpdHkiLCJ1c2VySWQiLCJzZXJ2ZXJVcCIsImdldCIsInJlcSIsInJlcyIsInRpdGxlIiwicmVuZGVyIiwicG9zdCIsIm1ldGhvZCIsInVybCIsImRhdGEiLCJib2R5IiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImZpcnN0bmFtZSIsImxhc3RuYW1lIiwiY2l0eWlkIiwidGhlbiIsInJlc3BvbnNlIiwiY29uc29sZSIsImxvZyIsInJlZGlyZWN0IiwiY2F0Y2giLCJlcnJvciIsInVuZGVmaW5lZCIsIm1zZyIsImVycm9ycyIsIm1lc3NhZ2UiLCJ1c2VyIiwiaWQiLCJnZXRVc2VyIiwic3RhdHVzQ29kZSIsIkpTT04iLCJwYXJzZSIsImJpa2VJZCIsImJpa2VDb29yZHMiLCJiaWtlQmF0dGVyeSIsImRhdGFQYWNrIiwiaGVhZGVycyIsInJlbnRRdWV1ZSIsInN0YXRpb25zIiwiYklkIiwiY0lkIiwidGtuIiwiYkNyZCIsInVzciIsImNpdHlJZCIsInJlc3VsdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiIraFpBZVk7eUZBZlosR0FBSUEsQ0FBQUEsT0FBTyx5QkFBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBVixDQUFYLENBQ0EsR0FBSUMsQ0FBQUEsTUFBTSx5QkFBR0YsT0FBTyxDQUFDRyxNQUFSLEVBQUgsQ0FBVixDQUNBLEdBQUlDLENBQUFBLE9BQU8seUJBQUdILE9BQU8sQ0FBQyxTQUFELENBQVYsQ0FBWCxDQUNBLEdBQUlJLENBQUFBLEtBQUsseUJBQUdKLE9BQU8sQ0FBQyxPQUFELENBQVYsQ0FBVCxDQUNBO0FBRUEsR0FBSUssQ0FBQUEsTUFBTSx5QkFBRyx1QkFBSCxDQUFWLENBQ0EsR0FBSUMsQ0FBQUEsTUFBTSx5QkFBRyxzQ0FBSCxD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QUNqQjdDLEtBQUssQ0FBQyxDQUNGYyxNQUFNLENBQUUsS0FETixDQUVGOEIsT0FBTyxDQUFFLENBQ0wsaUJBQWtCekMsS0FEYixDQUZQLENBS0ZZLEdBQUcsQ0FBRyxHQUFFZCxNQUFPLDRCQUEyQkMsTUFBTyxFQUwvQyxDQUFELENBQUwsQ0FPS3FCLElBUEwsQ0FPVUMsUUFBUSxFQUFJLGlEQUNkQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUYsUUFBUSxDQUFDUixJQUFyQixFQUNILENBVEwsRUFVS1ksS0FWTCxDQVVXQyxLQUFLLEVBQUksaURBQ1pKLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRyxLQUFLLENBQUNMLFFBQWxCLEVBQ0gsQ0FaTCxFQWFILEMsd0JBRUQ4QixNQUFNLENBQUNDLE9BQVAsQ0FBaUIxRCxNQUFqQiIsInNvdXJjZXNDb250ZW50IjpbInZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xudmFyIHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG52YXIgcmVxdWVzdCA9IHJlcXVpcmUoJ3JlcXVlc3QnKTtcbnZhciBheGlvcyA9IHJlcXVpcmUoJ2F4aW9zJyk7XG4vL2NvbnN0IG1hcE1vZGVsID0gcmVxdWlyZSgnLi4vcHVibGljL2phdmFzY3JpcHRzL21hcC5qcycpO1xuXG52YXIgYXBpQWRyID0gXCJodHRwOi8vbG9jYWxob3N0OjEzMzdcIjtcbnZhciBhcGlLZXkgPSBcIjkwMzAxYTI2LTg5NGMtNDllYi04MjZkLWFlMGMyYjIyYTQwNVwiO1xudmFyIHRva2VuID0gbnVsbDtcbnZhciBlbWFpbCA9IG51bGw7XG52YXIgY2l0eSA9IG51bGw7XG52YXIgdXNlcklkID0gbnVsbDtcblxuc2VydmVyVXAoKTtcblxuLy8gR0VUIExPR0lOIFBBR0VcbnJvdXRlci5nZXQoJy8nLCBmdW5jdGlvbihyZXEsIHJlcykge1xuICAgIHZhciB0aXRsZSA9IFwiSG9tZVwiO1xuXG4gICAgcmVzLnJlbmRlcignaW5kZXgnLCB7IHRpdGxlOiB0aXRsZX0pO1xufSk7XG5cbi8vIEdFVCBSRUdJU1RFUiBQQUdFXG5yb3V0ZXIuZ2V0KCcvcmVnaXN0ZXInLCBmdW5jdGlvbihyZXEsIHJlcykge1xuICAgIHJlcy5yZW5kZXIoJ3JlZ2lzdGVyJywgeyB0aXRsZTogJ1JlZ2lzdGVyJ30pO1xufSk7XG5cbi8vUkVHSVNURVIgQ0FMTFxucm91dGVyLnBvc3QoJy9yZWdpc3RlcicsIGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG4gICAgLy9jb25zb2xlLmxvZyhyZXEuYm9keS5jaXR5aWQpO1xuICAgIGF4aW9zKHtcbiAgICAgICAgbWV0aG9kOiAncG9zdCcsXG4gICAgICAgIHVybDogYCR7YXBpQWRyfS92MS9hdXRoL2N1c3RvbWVyP2FwaUtleT0ke2FwaUtleX1gLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBlbWFpbDogcmVxLmJvZHkudXNlcm5hbWUsXG4gICAgICAgICAgICBwYXNzd29yZDogcmVxLmJvZHkucGFzc3dvcmQsXG4gICAgICAgICAgICBmaXJzdG5hbWU6IHJlcS5ib2R5LmZpcnN0bmFtZSxcbiAgICAgICAgICAgIGxhc3RuYW1lOiByZXEuYm9keS5sYXN0bmFtZSxcbiAgICAgICAgICAgIGNpdHlpZDogcmVxLmJvZHkuY2l0eWlkXG4gICAgICAgIH1cbiAgICB9KVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgIHJlcy5yZWRpcmVjdCgnLycpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZSk7XG4gICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJlcy5yZW5kZXIoJ3JlZ2lzdGVyJywge21zZzogZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcnMubWVzc2FnZX0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXMucmVuZGVyKCdyZWdpc3RlcicsIHttc2c6IFwiU2VydmVyIGRvd24hXCJ9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG59KTtcblxuLy9MT0dJTiBDQUxMXG5yb3V0ZXIucG9zdCgnLycsIGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG4gICAgY29uc29sZS5sb2cocmVxLmJvZHkudXNlcm5hbWUpO1xuICAgIC8vdmFyIHRlbXAgPSBKU09OLnN0cmluZ2lmeSh7ZW1haWw6IHJlcS5ib2R5LmVtYWlsfSk7XG4gICAgYXhpb3Moe1xuICAgICAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICAgICAgdXJsOiBgJHthcGlBZHJ9L3YxL2F1dGgvY3VzdG9tZXIvbG9naW4/YXBpS2V5PSR7YXBpS2V5fWAsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIGVtYWlsOiByZXEuYm9keS51c2VybmFtZSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiByZXEuYm9keS5wYXNzd29yZFxuICAgICAgICB9XG4gICAgfSlcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhLmRhdGEuaWQpO1xuICAgICAgICAgICAgdG9rZW4gPSByZXNwb25zZS5kYXRhLmRhdGEudG9rZW47XG4gICAgICAgICAgICBlbWFpbCA9IHJlc3BvbnNlLmRhdGEuZGF0YS51c2VyO1xuICAgICAgICAgICAgdXNlcklkID0gcmVzcG9uc2UuZGF0YS5kYXRhLmlkO1xuICAgICAgICAgICAgZ2V0VXNlcihyZXNwb25zZS5kYXRhLmRhdGEuaWQpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgIGNpdHkgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICByZXMucmVkaXJlY3QoJy9tYXAnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJlcy5yZW5kZXIoJ2luZGV4Jywge21zZzogZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcnMudGl0bGV9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzLnJlbmRlcignaW5kZXgnLCB7bXNnOiBcIlNlcnZlciBkb3duIVwifSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xufSk7XG5cblxuLy9CSUtFIFJFTlRBTCBNQVBcbnJvdXRlci5nZXQoJy9tYXAnLCBmdW5jdGlvbihyZXEsIHJlcykge1xuICAgIGNvbnNvbGUubG9nKFwibWFwY2FsbFwiK2NpdHkpO1xuICAgIGlmICh0b2tlbiAhPSBudWxsKSB7XG4gICAgICAgIHJlcXVlc3QoYCR7YXBpQWRyfS92MS9jaXR5LyR7Y2l0eX0vYmlrZT9hcGlLZXk9JHthcGlLZXl9YCxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChlcnJvciwgcmVzcG9uc2UsIGJvZHkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVycm9yICYmIHJlc3BvbnNlLnN0YXR1c0NvZGUgPT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShib2R5KTtcblxuICAgICAgICAgICAgICAgICAgICByZXMucmVuZGVyKCdtYXAnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ3Rlc3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmlrZUlkOiAnQ2xpY2sgQmlrZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBiaWtlQ29vcmRzOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpa2VCYXR0ZXJ5OiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFQYWNrOiBkYXRhXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBcGkgbm90IGF2YWlsYWJsZScpO1xuICAgICAgICAgICAgICAgICAgICByZXMucmVuZGVyKCdpbmRleCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJlcy5yZWRpcmVjdCgnLycpO1xuICAgIH1cbn0pO1xuXG5cbi8vUkVOVEFMIENBTEwgU1RBUlRcbnJvdXRlci5wb3N0KCcvbWFwJywgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgICBpZiAodG9rZW4gIT0gbnVsbCkge1xuICAgICAgICAvL2NvbnNvbGUubG9nKHJlcS5ib2R5LmJpa2VJZCk7XG4gICAgICAgIGF4aW9zKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwieC1hY2Nlc3MtdG9rZW5cIjogdG9rZW5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cmw6IGAke2FwaUFkcn0vdjEvdHJhdmVsL2Jpa2UvJHtyZXEuYm9keS5iaWtlSWR9P2FwaUtleT0ke2FwaUtleX1gXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVudFF1ZXVlKCk7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgc3RhdGlvbnMoY2l0eSkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5yZW5kZXIoJ3JlbnRhbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiByZXEuYm9keS5iaWtlSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBiSWQ6IHJlcS5ib2R5LmJpa2VJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNJZDogdXNlcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGtuOiB0b2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGJDcmQ6IHJlcS5ib2R5LmJpa2VDb29yZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICB1c3I6IGVtYWlsLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVBhY2s6IHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnJlbmRlcignaW5kZXgnLCB7bXNnOiBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9ycy50aXRsZX0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5yZW5kZXIoJ2luZGV4Jywge21zZzogXCJTZXJ2ZXIgZG93biFcIn0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG4vL1JFTlRBTCBDQUxMIEVORFxucm91dGVyLnBvc3QoJy9yZW50YWwnLCBmdW5jdGlvbihyZXEsIHJlcykge1xuICAgIGlmICh0b2tlbiAhPSBudWxsKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2cocmVxLmJvZHkpO1xuICAgICAgICBheGlvcyh7XG4gICAgICAgICAgICBtZXRob2Q6ICdkZWxldGUnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIFwieC1hY2Nlc3MtdG9rZW5cIjogdG9rZW5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cmw6IGAke2FwaUFkcn0vdjEvdHJhdmVsL2Jpa2UvJHtyZXEuYm9keS5iaWtlSWR9P2FwaUtleT0ke2FwaUtleX1gXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YS5kYXRhKTtcbiAgICAgICAgICAgICAgICByZXMucmVkaXJlY3QoJy8nKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5yZW5kZXIoJ2luZGV4Jywge21zZzogZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcnMudGl0bGV9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXMucmVuZGVyKCdpbmRleCcsIHttc2c6IFwiU2VydmVyIGRvd24hXCJ9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXMucmVkaXJlY3QoJy8nKTtcbiAgICB9XG59KTtcblxuLy8gVVNFIENJVFlJRCBGUk9NIFVTRVIgVE8gR0VUIFNUQVRJT05TIEZPUiBBQ1RJVkUgUkVOVEFMXG5hc3luYyBmdW5jdGlvbiBzdGF0aW9ucyhjaXR5SWQpIHtcbiAgICB2YXIgcmVzdWx0ID0gYXdhaXQgYXhpb3Moe1xuICAgICAgICBtZXRob2Q6ICdnZXQnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBcIngtYWNjZXNzLXRva2VuXCI6IHRva2VuXG4gICAgICAgIH0sXG4gICAgICAgIHVybDogYCR7YXBpQWRyfS92MS9jaXR5LyR7Y2l0eUlkfS9zdGF0aW9uP2FwaUtleT0ke2FwaUtleX1gXG4gICAgfSlcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgLy9yZXR1cm4gcmVzcG9uc2UuZGF0YS5kYXRhLmNpdHlpZDtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBcIkVycm9yIHJlcXVlc3RpbmcgdXNlci5cIjtcbiAgICAgICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG4vLyBHRVQgQ0lUWSBJRCBGUk9NIFVTRVIgQUZURVIgTE9HSU5cbmFzeW5jIGZ1bmN0aW9uIGdldFVzZXIodXNlcklkKSB7XG4gICAgdmFyIHJlc3VsdCA9IGF3YWl0IGF4aW9zKHtcbiAgICAgICAgbWV0aG9kOiAnZ2V0JyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJ4LWFjY2Vzcy10b2tlblwiOiB0b2tlblxuICAgICAgICB9LFxuICAgICAgICB1cmw6IGAke2FwaUFkcn0vdjEvYXV0aC9jdXN0b21lci8ke3VzZXJJZH0/YXBpS2V5PSR7YXBpS2V5fWBcbiAgICB9KVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEuZGF0YS5jaXR5aWQpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEuZGF0YS5jaXR5aWQ7XG4gICAgICAgICAgICAvL3JldHVybiByZXNwb25zZS5kYXRhLmRhdGEuY2l0eWlkO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIFwiRXJyb3IgcmVxdWVzdGluZyB1c2VyLlwiO1xuICAgICAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8vIENIRUNLIElGIFNFUlZFUiBJUyBVUCBBTkQgQVZBSUxBQkxFIE9USEVSV0lTRSBVU0UgRE9DS0VSU0VSVkVSXG5mdW5jdGlvbiBzZXJ2ZXJVcCgpIHtcbiAgICByZXF1ZXN0KGAke2FwaUFkcn0vdjEvY2l0eT9hcGlLZXk9JHthcGlLZXl9YCwgZnVuY3Rpb24gKGVycm9yLCByZXNwb25zZSkge1xuICAgICAgICBpZiAoIWVycm9yICYmIHJlc3BvbnNlLnN0YXR1c0NvZGUgPT0gMjAwKSB7XG4gICAgICAgICAgICBhcGlBZHIgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MTMzN1wiO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTZXJ2ZXIgaXMgdXBcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhcGlBZHIgPSBcImh0dHA6Ly9iYWNrZW5kOjEzMzdcIjtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2VydmVyIGRvd25cIik7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLy9VUERBVEUgUkVOVCBRVUVVRSBJTiBPUkRFUiBUTyBSRVRVUk4gQklLRVxuZnVuY3Rpb24gcmVudFF1ZXVlKCkge1xuICAgIGF4aW9zKHtcbiAgICAgICAgbWV0aG9kOiAnZ2V0JyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJ4LWFjY2Vzcy10b2tlblwiOiB0b2tlblxuICAgICAgICB9LFxuICAgICAgICB1cmw6IGAke2FwaUFkcn0vdjEvdHJhdmVsL3JlbnRlZD9hcGlLZXk9JHthcGlLZXl9YFxuICAgIH0pXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UpO1xuICAgICAgICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XG4iXX0=